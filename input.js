/*
活动名称：一键价保
环境变量：jd_price_interval // 自定义运行间隔时长（整数，单位毫秒），默认1500
        jd_price_notify // 是否推送通知（true/false），默认不推送
        jd_price_pinFilter // 账号pin过滤，多个用@进行分割

cron:55 12 * * *

*/

const $ = new Env('一键价保')
var iｉl='jsjiami.com.v7';const i1l1II=iii1II;(function(illIi1,ii1ili,liil1i,lI1lil,i1l1iI,liil1l,lI1lii){return illIi1=illIi1>>0x3,liil1l='hs',lI1lii='hs',function(Iiili1,Iil1l1,i1i11I,il1iIl,iii1ii){const liiI1l=iii1II;il1iIl='tfi',liil1l=il1iIl+liil1l,iii1ii='up',lI1lii+=iii1ii,liil1l=i1i11I(liil1l),lI1lii=i1i11I(lI1lii),i1i11I=0x0;const il1iIi=Iiili1();while(!![]&&--lI1lil+Iil1l1){try{il1iIl=-parseInt(liiI1l(0x1f2,'qJ@O'))/0x1+parseInt(liiI1l(0x271,'4ua1'))/0x2*(parseInt(liiI1l(0x28f,'7T2]'))/0x3)+-parseInt(liiI1l(0x26a,'SFnt'))/0x4+parseInt(liiI1l(0x224,'A0A['))/0x5+-parseInt(liiI1l(0x2c1,'&iMh'))/0x6*(-parseInt(liiI1l(0x274,'FLoF'))/0x7)+parseInt(liiI1l(0x2a5,'1m@P'))/0x8*(-parseInt(liiI1l(0x21b,'8xf1'))/0x9)+parseInt(liiI1l(0x24f,'gUb9'))/0xa;}catch(iii1il){il1iIl=i1i11I;}finally{iii1ii=il1iIi[liil1l]();if(illIi1<=lI1lil)i1i11I?i1l1iI?il1iIl=iii1ii:i1l1iI=iii1ii:i1i11I=iii1ii;else{if(i1i11I==i1l1iI['replace'](/[DkbhBxepgCVrnRXPUHl=]/g,'')){if(il1iIl===Iil1l1){il1iIi['un'+liil1l](iii1ii);break;}il1iIi[lI1lii](iii1ii);}}}}}(liil1i,ii1ili,function(II11li,I1l11i,iIIiiI,liiI1i,ililIi,lilIIl,ililIl){return I1l11i='\x73\x70\x6c\x69\x74',II11li=arguments[0x0],II11li=II11li[I1l11i](''),iIIiiI=`\x72\x65\x76\x65\x72\x73\x65`,II11li=II11li[iIIiiI]('\x76'),liiI1i=`\x6a\x6f\x69\x6e`,(0x17d63e,II11li[liiI1i](''));});}(0x658,0x71189,Iii11l,0xcd),Iii11l)&&(iｉl=i1l1II(0x1d5,'%%2x'));function Iii11l(){const i1i11i=(function(){return[...[iｉl,'PPjRbpsrrjgDirBabemik.XcVohmVH.UvCxr7Vln==','t8kDW6HI','f8o1WOVdK8oKWPCnW43dUSkVW57dGq','uhpdHmkF','FmkVW7Hxu3dcO8kD','WQ3cKSovqG','jCopDNBcG8oAWP5oWO/dNLeOamksWRtcStJdRCk1hxaBia','eKXX','WQJcICoOW7xcRHKkDq','xuhcRSkbWQ8','WRlcICoft8kPWPvLWPNcHSoBWOxcNmkbl0PbwYFcS8k3dCoc','wxFdNCk2q8ooxWBdMwBcTcLfWRm','5y6V6ysJ54Uc5Og/57Im5P6FbmkKW7hcMSkqW4fZCCoFWQC','W5/dLH7cQSo8iYpcRr4Qj8o9CG','tsDtW6FcS8kdW6FcHmkJW6lcRvu0dmo9WQ5nWQXPW6WF','W70SW4ONfflcNYm','WQLVWRLXWQpcO8k1WO/dH8o/gSoOCCkUqYtcGXq','mIFdVCoKEmos','W73cQsC','vMBdNCkkx8ktguFdP2hcVcLvWRdcLSoCgLjBcmksgmkLAMNdMa','zCkfzMBcUmotWOaoWQVdNNaIa8kkWOlcVHxdGmk+fwu','mJFdO8oeD8oc','WRChkmoTlNu','D8kwW5bArG','WPyKpx1mW5S','WQX6C8ksWPtdH1JdIMzvW57cMctdGmk3mSk+W6iJkSkkW6BdUCkjnmkPWQrUpmkbiSk9sfldJmkgWQ4iCKVcNG','WQBdQSol','8jAyNmos','wCkbW6m','f8kOWPhdVY1jWQlcI8osc8oKW7j1cq','5BEn6k2w57+16lE56lYk6l+i6kol5BYW5yQw6lAD5y2D','WQzVWRa','WPyOW4jWdZSM','A8keW7hcMSk6','fmkMWRXgEa','qmoRW48','WO0VlNryW4VdQW0','W4OBW5XQWOa','W53dGSkdj8oVWRRdQCoy','kWu0rmo3wCor','W4tcHSk0oJpcUMVdGmoVWRqUWQHv','FSkzW6lcVCo2ga','WRpcGSodtSk6WOb4WPRcICoWWQNcOmkBj0bbytRcG8k7bq','uKuCWPCm','h8k5WODUra','W7u4eCkkWObz','kJBdJmorzmoFE1NdQI3dNxBcP1zsaCoP','dSoFWQS8WPHAW7CYWRZdQG','pCoYdwu','5PY45QYA5OM+5yQ455wH5lYm5Ogk5yM45lYc5lQm','iaPAexHgW78mWO4DWPW','weHmW7q','W5qdWPK','WPxdKmo4AMK','FSkzW6i','W6ajWQWvaa','WQv3D8kb','W7xcPZtdVW','qdbtW6lcLCkd','rSoyWP3dOb3cJSkB','dCkPWPldTsL7WRVdL8oEemoSWR93vYhcSG','WQ/cGSovwSkhWOTMWPdcVmo6WO7cQG','DSkxW7hcMq','rCo4WRddNGe','WPm9ts7cLdVcQ0FcJSoh','W50cWOG','lZZdSmoev8ogAfddJaRdNfhcT0DhbCo2xSk5baHZ','WQLfqmk1WQ0','hmoXWONdMSoNWPDiW6ldNSk6W57dI8oF','mCkqWQ5tva','eu11c8ouWRadW4FcQvasW781jaGukmomwvhdMc0','rmoWW5ZdOmozW6/cVSkLBSkqWONcMmoMsSk4pmoie8oZvCkw','W7FcRYZdQSk1WOS','eej7cW','twBdM8ktqSooxW7dSW','p21Ui8ouygVcPaddJM0FW5/dR8os','mL5QmSkX','W54YiSoBW5hdQtbJuW','h8ozk0/dSCoWf8kP','sW3dQCkldq','W4Lplxes','WPZcS8opu8kR','56w0s+I+TUIHQoMwI+MAUoAvLoMxTa','lcXRW6S','jgzUnSojEG'],...(function(){return[...['6lEM5y205Pwt5Ps2','h8kMWPLfqG','rSkhW7jIWRu','eCo4o8kkW53dMCo/WPXTqmk1ya','5lUkbrJLH6tKVAlKUQvYxq','WOGKi39zW4C','W5zoafek','xvhcLSk2WPm','WQDSWQDLWQxcOCkQWQxdI8oVnCo0DmksyIZcJWiSWQbAj8oSuICFWONdOSk2WOLEW6JdKCoWm8oiW6bkWQVcO8o9','W4P5aq','cCoIFSomWOFcHmonW6ryzSk7t3lcVYmNW4xdJSozW6JcKgSxWR5yW5uy','y2W2zGS','W4C7W7K','uHTsW7VcIG','W4HPWOjzgtGjW7FdOG','qCkUswpcQq','WR4fg01l','W4yNW7K','W4tdTmkgpSoV','gdRdO8ohyq','CCkFW53cGSoO','W4tdHtJcKmod','bmkahr3cUG','iGeZvG','tSkqW5LEDW','vIxdMCk8hq','smkGW4O','BN3dUCofvCozD1FdNce','W7tdUfCrW5TgWOW','W4WmwmkaBa','WQ1ZBCkhWO/dNW','5lMhqCop5ysQ5l6x5lQeWOldRG','v8kCW696WR4IWQHmWRBdImodxaiagM5Dk8k4tSoElSoLWPhcSq','W6CSW5S','WOlcH1NdSG','WPVdVCoBwLS','5lMTWQed5ysM5l2Q5lUqW5hcQq','wNpdNCkB','6yco55+E5O+g6ycMCZtdSq','uSkGW5pcL8kfW4GvW48','WPe4W5DsbIGY','5PYs5QYZ5OQ55yML55se5l6X5Oow5yMq5l2x5lUL','WQrMvSkwWQbRWPTqW5S','d8k+WOJdPInkWRJdGmo8aCo6WQ9IwsS','kG8G','WP4koG84','m3j3cq','bs00vSoc','WOxcIvtdOSkl','hmkOWOJdVYTk','j8khlr3cJW','b8oCWQHUWPDVW7eqWPy','DgXXW4ldTW','5P2s5Q+O5OUN5yQD55sj5l205Ooi5yQw5lYV5lMY','vmk5ECorWOdcJ8oxWQ1Z','jCkybtRcVq','WPyeW71JdG','W5yRvSkQvq','vmknW7LgzG','W63dRWVcNSo3WRJcJ8osEhHcW4ruW4m','5P+i5Q2G5OMD5yQh5l+W5lMy','WRPyW4S9ia','W5ddJCkukG','WOhcG0pdHSkl','4PMzFEIfNowURos4QUI+IUIGJEMvPEMyOUAuVEMvKoIUQEE8R+MuPoIUTW','W6m9W5PWra','pff5k8oq','W6yIW4q','W7RdKCkQWRxdS05Zxg7dKmoLqgC','W6pcOZpdRSk/WPFcJxVdV1xcJc7cTSk7WPO','5PYq5QYi5OIO5yIk55Ax5l2k5OkO5yMf5l+y5lUR','Ef4aqd18','W7qWW4DY','W7hdKqZcVSos','W6JdUNyIW78','uezF','WRH6WPTGCG3dGGNcIWBdQCkmfG','igrTiCouFMRcQc7dJKeFW5xdVCo4wxlcNIDTmmktW5dcJmkIeuy','omoMcLqlvW','W7W+W5q','hmk6WObSBq','W4GaW6aHnG','4P2VyUIeRoAER+I8SEIIQUMdJEwlM+s5K+MwNUISGta','6lsc5y2a5Pss5PEe','WO/cIe7dV8k/CxBcLG','W5JdICkolmoUWRy'],...(function(){return['W5JdG8kh','sCoAWRBdHqe','eSkcW4lcVKVdNSk0rXBdUSoNW6u','W73cOY7dUCkKWPe','WP3dLmo1EG','tSotWQ3dVaRcHSkwDs7dJCoJW50pcCojWRG','W5P3tbFcMctcQWNcU8ohbSoEg8orDSkO','p+kDNmk2','6lAa5y+H5PAg5PwS','lJFdTSofrmotDvpdGYhdSg3cRu9nbComq8kjcaa','WQ5dwmoOW4m','W7C9W6OQW7FdRmoLW7hcLCk3','WQRcHSopxSk8WOX4WPa','fSo5p8oxWPtcISo2WQ1E','WPCTjhTi','lCo2efikxmo2WOnwsCohWPtdSde','WPrJySopW6tdSdv1xrVcSmkW','WOGUkG','iNbroCoO','AmkSW7nzWPG','mH7dU8oTCq','CxFcI8kGWQFcGrqfeSk2cSkI','6lES5y+36lYq5RUZW7ddSCkd','W6NdQfiIW5juWP8','WOWmiZS','eeb/h8k1','WPG3xG','WRZORQhMSkdLP57OT5Cn4P2KpW','W78/W5b2ybGhD17dV0BcMWVdUIH9pJFdHCkwhbS','qSkKW47cRSk0W5ilW4VdR8k9','W4T6fLyqxmoqW6jOW7SDWPlcLWjEWQtdG8ookCoXWOvmW5hdHbmgW5xdQmoKW4T6mLHkW6tcLSoUWQ91zKa','WPxdNSoIB2JdQW','D1D3aCodFmoeW4KOxq','bSoDaxie','WQFcICo6','WR7dOmoKu0C','4P+4WOZMN4ROGRBMR7NNORdLPOJNKQ3cHq','E8kvCgO','emkOWPPN','W74jFmk2','WQj5BCkgWPldHuFdOgPfW7hcHchdVmkwoSkYW7q','ldFdVCogySoE','WOTQyConW6tdRJr5FrhcI8kMW7tdTGFcS35ZWPzQtcFcQszoW6FdQG','acZdLmoKW7FdMrvpnmk4g8kJ','W5FcTshdNmkC','WPa5tqi','5lIsBw3LHANKV7dKUzJcTf4','WOVcI2NdMSkZ','8lolHSop','q8kyyKtcUG','zINdOmkVnSk7W6vYrfBdTmozWRJcNrerWRO6','p21Tp8oABx0','hCkZWP/cOmkyW6ZcOCohtCkLWRFdNSoK','yd7dP8k9','5lI3oIpLHPhKVkBKUyaqWOm','WR7cJL3dTCk9','qSoEWP7dUb3cNq','CwqxWRe2','DMGVWQSwzSoheCo7W7/cGGfIAr9mWP57dCkCuW','5P+A5Q6q5OQC5yQw5l+C5lM7','WOxcO8owW7ZcQG','ChXDW5NdLW','55sx5l+W5Og75yIY5lYq5lUV55A06k6u5AEQ6lAEWPai','sCkIFa','W48Mua','yCkcW7FcKCoQdCoaW6JcOG','W7a5bq','FCkyW6BcNCofgSozW6lcOSoczCkwWQlcJxVcMmoElmkmW6mmrW','WR0kFZxcNG','auz4mmoA','W6VdSWy','5lQ2FSkZ5yEq5l+l5lMbiHW','W5GHW71BWPXBqa','5y6v6yEh5BYD5zg854In5OcpjCo8Cmkwi1hcG8k1WOOk','f8k/WQtdPJ5nWQJdGmoUfmoGWRjfvYlcQcCT','hfHhmmkw','g8kYWOm','w8kjW69R','WRVcLmo0W6BcPcGZy0pdOCoxs3ZcHSoCmq','WPeoiSoKmq','W5m9AmoSwSow','W6pdVrxcLG','F28OWRicmG'];}())];}())];}());Iii11l=function(){return i1i11i;};return Iii11l();};const jdCookie=require(i1l1II(0x2b2,'bN!1')),notify=require(i1l1II(0x2a1,'(mEA')),common=require(i1l1II(0x248,'JThZ')),{H5st}=require(i1l1II(0x1f6,'f*I['));let taskThreads=process[i1l1II(0x276,'VtlS')][i1l1II(0x1f5,'qJ@O')]||'1';const runInterval=process['env'][i1l1II(0x270,'bN!1')]||i1l1II(0x295,'6uh!'),isNotify=(process['env']['jd_price_notify']||process[i1l1II(0x276,'VtlS')]['jd_price_Notify'])==='true',pinFilter=(process['env'][i1l1II(0x23a,']#!G')]||'')['split']('@'),maxThreads=0x1;let cookiesArr=Object[i1l1II(0x1f4,'SFnt')](jdCookie)[i1l1II(0x2b1,'PZQZ')](iIII11=>jdCookie[iIII11])[i1l1II(0x228,'qJ@O')](IiI1i=>IiI1i);!cookiesArr[0x0]&&($[i1l1II(0x2a8,'n9pk')]($['name'],'【提示】请先获取Cookie'),process[i1l1II(0x225,'TAk#')](0x1));function iii1II(_0x327084,_0x1c53d1){const _0x598597=Iii11l();return iii1II=function(_0x991136,_0x3a6258){_0x991136=_0x991136-0x1d5;let _0x3399a4=_0x598597[_0x991136];if(iii1II['XmUXDS']===undefined){var _0x18e544=function(_0x3ea4c4){const _0x3a6207='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4c87c6='',_0x3387d3='';for(let _0x3d3200=0x0,_0x3fd11b,_0x551816,_0x5d173d=0x0;_0x551816=_0x3ea4c4['charAt'](_0x5d173d++);~_0x551816&&(_0x3fd11b=_0x3d3200%0x4?_0x3fd11b*0x40+_0x551816:_0x551816,_0x3d3200++%0x4)?_0x4c87c6+=String['fromCharCode'](0xff&_0x3fd11b>>(-0x2*_0x3d3200&0x6)):0x0){_0x551816=_0x3a6207['indexOf'](_0x551816);}for(let _0x284f1e=0x0,_0x30a4b9=_0x4c87c6['length'];_0x284f1e<_0x30a4b9;_0x284f1e++){_0x3387d3+='%'+('00'+_0x4c87c6['charCodeAt'](_0x284f1e)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3387d3);};const _0x5d2633=function(_0x311da0,_0x1f25c6){let _0xd3746=[],_0x5a86d6=0x0,_0xf3446c,_0x369be7='';_0x311da0=_0x18e544(_0x311da0);let _0x3e46c3;for(_0x3e46c3=0x0;_0x3e46c3<0x100;_0x3e46c3++){_0xd3746[_0x3e46c3]=_0x3e46c3;}for(_0x3e46c3=0x0;_0x3e46c3<0x100;_0x3e46c3++){_0x5a86d6=(_0x5a86d6+_0xd3746[_0x3e46c3]+_0x1f25c6['charCodeAt'](_0x3e46c3%_0x1f25c6['length']))%0x100,_0xf3446c=_0xd3746[_0x3e46c3],_0xd3746[_0x3e46c3]=_0xd3746[_0x5a86d6],_0xd3746[_0x5a86d6]=_0xf3446c;}_0x3e46c3=0x0,_0x5a86d6=0x0;for(let _0x29f70c=0x0;_0x29f70c<_0x311da0['length'];_0x29f70c++){_0x3e46c3=(_0x3e46c3+0x1)%0x100,_0x5a86d6=(_0x5a86d6+_0xd3746[_0x3e46c3])%0x100,_0xf3446c=_0xd3746[_0x3e46c3],_0xd3746[_0x3e46c3]=_0xd3746[_0x5a86d6],_0xd3746[_0x5a86d6]=_0xf3446c,_0x369be7+=String['fromCharCode'](_0x311da0['charCodeAt'](_0x29f70c)^_0xd3746[(_0xd3746[_0x3e46c3]+_0xd3746[_0x5a86d6])%0x100]);}return _0x369be7;};iii1II['QOKUGP']=_0x5d2633,_0x327084=arguments,iii1II['XmUXDS']=!![];}const _0x344c8f=_0x598597[0x0],_0xc25d50=_0x991136+_0x344c8f,_0x31c720=_0x327084[_0xc25d50];return!_0x31c720?(iii1II['PTZXGV']===undefined&&(iii1II['PTZXGV']=!![]),_0x3399a4=iii1II['QOKUGP'](_0x3399a4,_0x3a6258),_0x327084[_0xc25d50]=_0x3399a4):_0x3399a4=_0x31c720,_0x3399a4;},iii1II(_0x327084,_0x1c53d1);}!(async()=>{const i1ill=i1l1II,llll1={'joKDY':function(lil11l,i1i1Il){return lil11l-i1i1Il;},'CYYgU':function(I1lIl1,lil11i){return I1lIl1-lil11i;},'tvaLU':function(IlIIl,lI1liI){return IlIIl+lI1liI;},'IyuXR':function(i1i1Ii){return i1i1Ii();},'NKgBR':function(lllii,iI11Ii){return lllii!==iI11Ii;}};notify[i1ill(0x20f,'SFnt')]({'title':$[i1ill(0x245,'Uy55')]}),await llll1['IyuXR'](Main);if(isNotify&&notify[i1ill(0x282,'f*I[')]()){if(llll1[i1ill(0x291,'TAk#')](i1ill(0x1f1,'qJ@O'),i1ill(0x21f,'gUb9'))){if(li1Ii[i1ill(0x258,'^Q5h')]<=0x4)return IIII1I;else{const lllil=Iii111[i1ill(0x2ad,'So]R')](0x0,0x2),iI11Il=l1l1II[i1ill(0x1db,'iA4N')](-0x2),iIII1i=Iil1I1['max'](llll1[i1ill(0x264,'C@Z9')](llll1[i1ill(0x2ac,'%%2x')](Ii1iII,lllil[i1ill(0x1f3,'LSZL')]),iI11Il[i1ill(0x219,'bN!1')]),0x0),iil1i1='*'[i1ill(0x257,'bN!1')](iIII1i);return llll1['tvaLU'](lllil,iil1i1)+iI11Il;}}else await notify[i1ill(0x215,'JThZ')]();}})()[i1l1II(0x277,'SFnt')](il1i11=>$[i1l1II(0x26b,'M2eR')](il1i11))['finally'](()=>$['done']());async function Main(){const I1l11l=i1l1II,IlIll1={'XjMXO':function(IlIII,ilil1l){return IlIII(ilil1l);},'pXfuu':function(illlIi,I1lIii){return illlIi!==I1lIii;},'IRFVo':'bswnL','aonGc':function(IiI1I,illlIl){return IiI1I>illlIl;},'ScWuB':function(i11ill,IIIIIi){return i11ill>=IIIIIi;},'XfDeR':function(IIIIIl,I1lIil){return IIIIIl!==I1lIil;}};try{try{if(IlIll1[I1l11l(0x29d,'dEYk')](IlIll1[I1l11l(0x234,'f*I[')],I1l11l(0x1ea,'C@Z9'))){const IIIl1l=IlIll1[I1l11l(0x2b4,'Ya9*')](lI1Iil,lilIiI);IIIl1l>=0x0&&(IiilIi['waitTime']=IIIl1l);}else{const lllll=parseInt(taskThreads);IlIll1[I1l11l(0x298,'C@Z9')](lllll,0x0)&&IlIll1[I1l11l(0x2a9,'n[Fa')](lllll,0x1)&&(taskThreads=lllll);}}catch{taskThreads=0x1;}taskThreads=Math['min'](taskThreads,maxThreads),$['waitTime']=null;if(runInterval)try{const i11ili=parseInt(runInterval);IlIll1[I1l11l(0x2b0,'TAk#')](i11ili,0x0)&&($[I1l11l(0x251,'qe1w')]=i11ili);}catch{console['log']('⚠\x20自定义运行间隔时长设置错误');}console[I1l11l(0x261,'2!7]')](I1l11l(0x1fb,'2!7]')+$[I1l11l(0x216,'C@Z9')]+I1l11l(0x239,'gH!z')),console[I1l11l(0x1e9,'iA4N')]('间隔时长:\x20['+$[I1l11l(0x2be,'PZQZ')]/0x3e8+I1l11l(0x294,'dEYk')),console[I1l11l(0x232,'&iMh')]('代理开关:\x20['+common['getProxyStatus']()+']'),console['log'](I1l11l(0x2bd,'FLoF')+(isNotify?'开启':'关闭')+']'),console[I1l11l(0x20a,'f*I[')](I1l11l(0x206,'2!7]')+pinFilter[I1l11l(0x217,'Ya9*')](',\x20')+']'),console[I1l11l(0x283,'VtlS')](I1l11l(0x1fb,'2!7]')+$[I1l11l(0x28b,'zSsj')]+I1l11l(0x24e,'So]R')),console[I1l11l(0x1f0,'n[Fa')](''),$[I1l11l(0x256,'JThZ')]=[],await common[I1l11l(0x246,'lp6V')](taskThreads,cookiesArr,taskFnc),$['hasPrintActInfo']=![],$['runEnd']=![];$[I1l11l(0x250,'sj^!')]['length']>0x0&&(cookiesArr=cookiesArr[I1l11l(0x28a,'LSZL')]((iil1l1,lllli)=>!$[I1l11l(0x1f9,'bN!1')][I1l11l(0x1ee,'gUb9')](lllli+0x1)),$['needRemoveCookieIndex']=[]);const IIIl1i=notify[I1l11l(0x20d,'PZQZ')]();IIIl1i&&(IlIll1['XfDeR']('CApZX',I1l11l(0x23f,'^Q5h'))?console[I1l11l(0x236,'%%2x')]('\x0a📣\x20运行结果\x0a'+IIIl1i[I1l11l(0x223,'gH!z')](/：/g,I1l11l(0x1f7,'lp6V'))):llIIll[I1l11l(0x2b3,'IZyt')]=!![]);}catch(ill11i){I1l11l(0x2cb,'7[(#')===I1l11l(0x1fa,'7T2]')?console['log'](I1l11l(0x1ec,'sj^!')+ill11i):lI1IiI['waitTime']=i1lI;}}async function taskFnc(ill11l,I1lIiI){const lilIIi=i1l1II,lllili={'swUuH':function(i11ilI,ii1ii1){return i11ilI<=ii1ii1;},'oYKUm':function(llllI,lllil1){return llllI===lllil1;},'vuWhy':lilIIi(0x211,'$hZ['),'vgmUr':function(iil1il,ilil1I){return iil1il-ilil1I;},'WDhSU':function(i11il1,ii1iiI){return i11il1+ii1iiI;},'amHqJ':function(lllilI,ilil11){return lllilI(ilil11);},'NEKyk':function(illlI1,IIIl11){return illlI1>IIIl11;},'qYdxk':function(I1lIi1,liiIIi){return I1lIi1!==liiIIi;},'RtqDb':lilIIi(0x205,'8xf1'),'CMsaT':function(lil11I,Iliii1){return lil11I===Iliii1;},'OYYQu':lilIIi(0x299,'4ua1'),'LUeLh':lilIIi(0x213,'SFnt'),'vMtOP':function(iIiIi,iil1ll){return iIiIi===iil1ll;},'CWuMy':lilIIi(0x267,'n9pk'),'BMCrv':lilIIi(0x279,'VtlS'),'ZTysc':lilIIi(0x23e,'qa*Y'),'TSabT':lilIIi(0x21a,'7T2]'),'wWXAB':lilIIi(0x25b,'yWjv'),'PkYcP':lilIIi(0x290,'So]R'),'ciXzl':'application/json,\x20text/plain,\x20*/*','XKYMw':function(iiilil,iil1li){return iiilil<iil1li;},'ZDVUf':function(lillIl,iIiIl,iiilii){return lillIl(iIiIl,iiilii);},'coyqA':function(li1i1i,IlIli1){return li1i1i>=IlIli1;},'UvZNA':lilIIi(0x240,'40sS'),'JpDxI':function(illIiI,lI1lli){return illIiI(lI1lli);},'QPOjp':function(Ill1l,llI1Il,ii1iii){return Ill1l(llI1Il,ii1iii);},'hSCUV':lilIIi(0x260,'4ua1'),'oxLjS':function(i11iil,Ill1i){return i11iil===Ill1i;},'IALBS':lilIIi(0x2ba,'SFnt'),'KMora':function(ii1iil,lllI1l){return ii1iil(lllI1l);},'rLhLg':lilIIi(0x259,'lp6V'),'MCorA':function(i11iii,llI1Ii){return i11iii*llI1Ii;},'JNJaC':function(lllI1i,li1i1l,II1i1){return lllI1i(li1i1l,II1i1);}};if($['runEnd'])return{'runEnd':!![]};const IliiiI=decodeURIComponent(common[lilIIi(0x1ff,'$hZ[')](ill11l,lllili['UvZNA']));function Ill11(lI1lll,iIiII){const i1l1Il=lilIIi;if(lllili[i1l1Il(0x1e4,'IZyt')](lI1lll['length'],0x4))return lI1lll;else{if(lllili[i1l1Il(0x292,'dEYk')](lllili['vuWhy'],i1l1Il(0x235,'gH!z'))){const iil1lI=lI1lll[i1l1Il(0x1fe,'V]6E')](0x0,0x2),iiiliI=lI1lll[i1l1Il(0x1fe,'V]6E')](-0x2),li1i1I=Math[i1l1Il(0x2b8,'qe1w')](lllili[i1l1Il(0x2c4,'Q1MT')](iIiII-iil1lI[i1l1Il(0x29c,'V]6E')],iiiliI[i1l1Il(0x1ef,'n[Fa')]),0x0),illIii='*'[i1l1Il(0x25a,'V]6E')](li1i1I);return lllili[i1l1Il(0x203,'4ua1')](iil1lI+illIii,iiiliI);}else return Iliill;}}const liiIII=lllili['JpDxI'](decodeURIComponent,IliiiI),li1i11=lllili[lilIIi(0x2af,'lp6V')](Ill11,liiIII,0x6),iI11I1='【账号'+I1lIiI+'】'+li1i11+'：',il1i1l=notify[lilIIi(0x27c,'sj^!')](I1lIiI,IliiiI);if(pinFilter[lilIIi(0x1e1,'FLoF')]>0x0&&(pinFilter[lilIIi(0x266,'V]6E')](IliiiI)||pinFilter[lilIIi(0x268,'n[Fa')](encodeURIComponent(IliiiI)))){if('WCVaB'!==lilIIi(0x26d,'6uh!')){il1i1l[lilIIi(0x23c,']#!G')](lllili[lilIIi(0x285,'yWjv')]),console[lilIIi(0x283,'VtlS')](il1i1l['getInlineContent']()),$['needRemoveCookieIndex'][lilIIi(0x247,'PRmQ')](I1lIiI);return;}else lIIiil[lilIIi(0x2c3,'mlj#')](l1lIii+'本次成功保价'+I11iI1+lilIIi(0x237,'bN!1')+l1lIil+'元'),IiiIli[lilIIi(0x296,'gH!z')](lilIIi(0x1d6,'V]6E')+iillli+lilIIi(0x2bb,'IZyt')+I1l1Ii+'元');}const IlIlll=await common[lilIIi(0x24d,'Uy55')](ill11l);if(!IlIlll&&lllili[lilIIi(0x202,'gH!z')](typeof IlIlll,lilIIi(0x27d,'qJ@O'))){if(lllili[lilIIi(0x229,'6uh!')](lllili['IALBS'],lilIIi(0x21c,'LSZL')))II1Il=lilIlI;else{console[lilIIi(0x212,'qa*Y')](iI11I1+lilIIi(0x297,'W0ZA')),il1i1l[lilIIi(0x25e,'4ua1')]('账号无效'),$['needRemoveCookieIndex']['push'](I1lIiI);return;}}const IIIl1I=common[lilIIi(0x1d9,'gUb9')](IliiiI);let iil1ii,IlIlli;iil1ii='',await lllili['KMora'](lil111,lllili[lilIIi(0x209,'lF79')]);if(iil1ii){if(lllili[lilIIi(0x204,'bN!1')]==='tycKq'){const i11iiI=lllili['amHqJ'](i1ili1,i1l1l1);lllili[lilIIi(0x263,'PZQZ')](i11iiI,0x0)&&lllili[lilIIi(0x1dc,'gH!z')](i11iiI,0x1)&&(II11Ii=i11iiI);}else{let {succNum:succNum=0x0,succAmount:succAmount=0x0}=iil1ii;lllili[lilIIi(0x22c,'qa*Y')](succAmount,0x0)?lilIIi(0x221,'JThZ')===lilIIi(0x29e,'8xf1')?lilIil[lilIIi(0x278,'M2eR')]('⚠\x20自定义运行间隔时长设置错误'):(console['log'](iI11I1+'本次成功保价'+succNum+lilIIi(0x29b,'7[(#')+succAmount+'元'),il1i1l[lilIIi(0x296,'gH!z')](lilIIi(0x22b,'SFnt')+succNum+lilIIi(0x21e,'V]6E')+succAmount+'元')):console[lilIIi(0x230,'40sS')](iI11I1+'最近购买商品无差价，无需保价'),iil1ii[lilIIi(0x252,'2!7]')]&&iil1ii[lilIIi(0x218,'yWjv')][lilIIi(0x2b5,'yWjv')]>0x0&&(IlIlli=iil1ii[lilIIi(0x222,'TAk#')][0x0],await lllili[lilIIi(0x2d1,'lp6V')](lil111,lilIIi(0x29f,'2!7]')),await $[lilIIi(0x272,'$hZ[')](parseInt(lllili['MCorA']($['waitTime'],0x1)+0x1f4,0xa)));}}if($[lilIIi(0x253,'bN!1')])return{'runEnd':!![]};await $[lilIIi(0x2c5,'lF79')](lllili[lilIIi(0x2a6,'JThZ')](parseInt,$['waitTime']*0x1+0x1f4,0xa));async function il1i1i(lllI1I,lillI1){const llIli=lilIIi;try{if(llIli(0x1e3,'%%2x')!==llIli(0x293,'PRmQ'))switch(lllI1I){case llIli(0x1e7,'gH!z'):lllili[llIli(0x2cf,'1m@P')](lillI1['code'],0x0)&&lillI1[llIli(0x275,'7[(#')]?lllili[llIli(0x2c6,'mlj#')](lillI1['data']['flag'],!![])&&lillI1[llIli(0x2ae,'mlj#')][llIli(0x200,'7T2]')]==='0'?iil1ii=lillI1[llIli(0x2b9,'gUb9')]:lllili[llIli(0x287,'C@Z9')]!==lllili[llIli(0x22d,'7[(#')]?console[llIli(0x249,'zSsj')](iI11I1+'保价申请失败:\x20'+(lillI1['data'][llIli(0x284,'bN!1')]||lillI1[llIli(0x1e2,'iA4N')]['responseMessage'])):l1llII[llIli(0x242,'6uh!')](IilIll,lI11Ii):console[llIli(0x1e5,'7[(#')](''+iI11I1+JSON['stringify'](lillI1));break;case llIli(0x20e,'dEYk'):if(lillI1['code']===0x0&&lillI1[llIli(0x280,'M2eR')]){if(lllili[llIli(0x28e,'lF79')](lillI1['data'][llIli(0x27f,'PRmQ')],'0')){if(lllili[llIli(0x2a4,'sj^!')](llIli(0x227,'gUb9'),llIli(0x2aa,'bN!1')))try{const liil11=lI1Iii(i1li);liil11>=0x0&&(IliI11[llIli(0x1fc,'PRmQ')]=liil11);}catch{i1l1lI[llIli(0x1dd,'qe1w')](llIli(0x1da,'1m@P'));}else{let {succNum:succNum=0x0,succAmount:succAmount=0x0}=lillI1['data'];succAmount>0x0?(console['log'](iI11I1+llIli(0x2cc,'C@Z9')+succNum+llIli(0x2b6,'VtlS')+succAmount+'元'),il1i1l['insert'](llIli(0x2c0,'Uy55')+succNum+llIli(0x226,'yWjv')+succAmount+'元')):lllili['CWuMy']!==llIli(0x281,'qJ@O')?iIli1I[llIli(0x2a0,'dEYk')](Iiil1+'用优惠券保价申请失败:\x20'+(iiilli['data'][llIli(0x288,'zSsj')]||l1iIIl[llIli(0x1e2,'iA4N')][llIli(0x28d,'gH!z')])):console['log'](iI11I1+llIli(0x22e,'4ua1')+(lillI1[llIli(0x21d,'f*I[')][llIli(0x233,'M2eR')]||lillI1[llIli(0x2bc,'Uy55')][llIli(0x1df,'LSZL')]));}}else console[llIli(0x265,'A0A[')](iI11I1+'用优惠券保价申请失败:\x20'+(lillI1[llIli(0x27a,'yWjv')][llIli(0x20c,'iA4N')]||lillI1[llIli(0x2ae,'mlj#')]['responseMessage']));}else console[llIli(0x201,'V]6E')](''+iI11I1+JSON[llIli(0x231,'M2eR')](lillI1));break;}else{let {succNum:succNum=0x0,succAmount:succAmount=0x0}=ii1li['data'];succAmount>0x0?(lliiiI[llIli(0x2a3,'n9pk')](lilil+llIli(0x273,'FLoF')+succNum+'件,\x20共保价:\x20'+succAmount+'元'),ll1ll[llIli(0x26f,'&iMh')](llIli(0x1e0,'7[(#')+succNum+llIli(0x2bb,'IZyt')+succAmount+'元')):Illl11[llIli(0x254,'LSZL')](ii1lI+'用优惠券保价申请失败:\x20'+(I1ilIl[llIli(0x23d,'4ua1')][llIli(0x24c,'PRmQ')]||I11iII['data'][llIli(0x2c2,']#!G')]));}}catch(l1iIII){lllili[llIli(0x1eb,'qe1w')]!==lllili[llIli(0x2d0,'Ya9*')]?(delete lI11I1[llIli(0x27b,'LSZL')],delete l1il11['headers'][lllili['RtqDb']]):console[llIli(0x261,'2!7]')](llIli(0x214,'n[Fa')+lllI1I+'\x20请求响应\x20'+(l1iIII[llIli(0x269,'mlj#')]||l1iIII));}}async function lil111(IlIlil){const i1i11l=lilIIi;if($[i1i11l(0x1e8,'$hZ[')])return;let lIli1I='',II1il=null,lllI11=null,I1lIll='POST',I1lIli={},II1ii={};switch(IlIlil){case'mlproprice_skuOnceApply_jsf':lIli1I=i1i11l(0x289,'A0A['),lllI11={'appid':lllili['ZTysc'],'functionId':lllili[i1i11l(0x1d7,'Yvbv')],'body':JSON[i1i11l(0x2cd,'(mEA')]({'onceBatchId':'','couponConfirmFlag':null,'type':'25'}),'client':i1i11l(0x26e,'C@Z9'),'loginType':0x2,'h5st':'','t':Date['now']()};break;case lllili[i1i11l(0x2a2,'FLoF')]:lIli1I=i1i11l(0x22a,'6uh!'),lllI11={'appid':i1i11l(0x27e,']#!G'),'functionId':'mlproprice_skuOnceApply_jsf','body':JSON[i1i11l(0x28c,'Uy55')]({'onceBatchId':IlIlli[i1i11l(0x24a,'qa*Y')]||'','couponConfirmFlag':0x1,'type':'25'}),'client':i1i11l(0x26e,'C@Z9'),'loginType':0x2,'h5st':'','t':Date[i1i11l(0x22f,'(mEA')]()};break;default:console[i1i11l(0x2a0,'dEYk')]('❌\x20未知请求\x20'+IlIlil);return;}const IIIIII={};II1il&&Object[i1i11l(0x2c8,']#!G')](II1il,IIIIII);lllI11&&Object['assign'](lllI11,IIIIII);const lillII={'url':lIli1I,'method':I1lIll,'headers':{'origin':i1i11l(0x2b7,'4ua1'),'Referer':i1i11l(0x255,'Uy55'),'User-Agent':IIIl1I,'Cookie':ill11l,'x-rp-client':lllili[i1i11l(0x2c9,'So]R')],'accept':lllili[i1i11l(0x2ab,'M2eR')]},'params':lllI11,'data':II1il,'timeout':0x4e20};if(lllili['CMsaT'](I1lIll,'GET')){if(lllili[i1i11l(0x24b,'8xf1')]('golkH','golkH'))delete lillII[i1i11l(0x241,'%%2x')],delete lillII[i1i11l(0x2bf,'1m@P')][lllili[i1i11l(0x2ce,'So]R')]];else{IiiIl1[i1i11l(0x2a0,'dEYk')](lIIil1+i1i11l(0x1ed,'qJ@O')),IIli1[i1i11l(0x25c,'W0ZA')](i1i11l(0x1f8,'dEYk')),II1liI[i1i11l(0x26c,'PRmQ')][i1i11l(0x243,'4ua1')](IlI1i1);return;}}const ii1ilI=0x1;let lI1ll1=0x0,iIiI1=null,liil1I=![];while(lllili[i1i11l(0x23b,'lF79')](lI1ll1,ii1ilI)){const IlIliI=await common[i1i11l(0x207,'IZyt')](lillII);if(!IlIliI[i1i11l(0x238,'n9pk')]){iIiI1=i1i11l(0x220,'VtlS')+IlIlil+i1i11l(0x20b,'&iMh')+IlIliI['error'],lI1ll1++;continue;}if(!IlIliI[i1i11l(0x208,'Q1MT')]){iIiI1=i1i11l(0x25d,'qJ@O')+IlIlil+'\x20请求失败\x20➜\x20无响应数据',lI1ll1++;continue;}lllili[i1i11l(0x2a7,'V]6E')](il1i1i,IlIlil,IlIliI[i1i11l(0x1d8,'n[Fa')]),liil1I=![];break;}lllili[i1i11l(0x2c7,'gUb9')](lI1ll1,ii1ilI)&&(console[i1i11l(0x2a3,'n9pk')](iIiI1),liil1I&&($[i1i11l(0x262,'1m@P')]=!![]));}}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
